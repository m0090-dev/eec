#!/bin/bash
# UTF-8 前提

# ビルドディレクトリを PATH に追加
BUILD_DIR="/mnt/d/win/program/go/main-project/eec/build"
export PATH="$BUILD_DIR:$PATH"

# 実行ファイル名
eec_deleter="eec-deleter"
eec_exe="eec"

# 第一引数が "run" の場合は deleter を起動
if [[ "$1" == "run" ]]; then
    # プロセスが既に動いているか確認
    if pgrep -x "$eec_deleter" > /dev/null; then
        echo "[$eec_deleter] は既に実行中です。"
    else
        echo "[$eec_deleter] を起動します…"
        # バックグラウンドで起動して出力を捨てる
        nohup "$eec_deleter" >/dev/null 2>&1 &
    fi
fi

# eec 実行、引数をそのまま渡す
"$eec_exe" "$@"
